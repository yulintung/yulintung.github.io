<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <div style="height:100px"></div>
        <div id="qq"></div>
        <div id="list" class="list-group"></div>
        <img id="correct" src="correct.png" />
        <img id="incorrect" src="incorrect.png" />
        <input class="btn btn-primary" id="next" type="reset" value="Next" />
    </div>
    <script>
        $(document).ready(function() {
                     
            var res = $.getJSON("https://yulintung.github.io/word_choice/words_31_40.json", function(wordArray){                             
                var getQuestion = function(){
                    $("img#correct").hide();
                    $("img#incorrect").hide();
                    var order = getRandomNumber(4, wordArray.length);
                    console.log(order);
                    /*console.log(wordArray.length);
                    console.log(wordArray[order[0]]);
                    console.log(wordArray[order[1]]);
                    console.log(wordArray[order[2]]);
                    console.log(wordArray[order[3]]);*/
                    var correct = getRandomNumber(1,4);
                    console.log(correct);
                    $("#qq").html('<h4>'+wordArray[order[correct]].kor+'</h4>');
                    $("#list").html(
                        '<a href="#" id="opt0" class="list-group-item list-group-item-action">'+wordArray[order[0]].cht+"<a>"+
                        '<a href="#" id="opt1" class="list-group-item list-group-item-action">'+wordArray[order[1]].cht+"<a>"+
                        '<a href="#" id="opt2" class="list-group-item list-group-item-action">'+wordArray[order[2]].cht+"<a>"+
                        '<a href="#" id="opt3" class="list-group-item list-group-item-action">'+wordArray[order[3]].cht+"<a>"
                    );
                    $("#list > a").click(function(obj){                   
                        if (this.id == 'opt'+correct) {
                            $("img#correct").show();
                            $("img#incorrect").hide();
                            wordArray.splice(order[correct],1);
                            console.log(wordArray.length);
                            if (wordArray.length < 4) {
                                alert('completed!');
                            }
                        } else {
                            $("img#incorrect").show();
                            $("img#correct").hide();
                        }
                    });
                }
                getQuestion();
                $("#next").click(function(){
                    getQuestion();
                });
                
                
            }).fail(function(){
                console.log("An error has occurred.");
            });
        });
        var getRandomNumber = function(size, totalSize){
            var str='';
            var arr=[];
            for(i=0;i<size;i++){
                str = Math.round( Math.random()*(totalSize-1));   
                for(j=0;j<arr.length;j++){
                    if(arr[j]==str){
                        arr.splice(j,1);
                        i--;
                    }
                }
                arr.push( str);
            }
            return arr;
        };
    </script>
</body>
</html>
